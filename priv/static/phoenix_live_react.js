import l from"react";import{createRoot as d}from"react-dom/client";var r=function(t,e,i,n={},o={}){let s=e.dataset.liveReactProps?JSON.parse(e.dataset.liveReactProps):{};e.dataset.liveReactMerge?s={...o,...s,...n}:s={...s,...n};let a=l.createElement(i,s);return t.render(a),s},p=function(t,e){let i=t.nextElementSibling,n=Array.prototype.reduce.call(t.dataset.liveReactClass.split("."),(s,a)=>s[a],window),o=d(i);return r(o,t,n,e),{root:o,target:i,componentClass:n}},E=function(){let t=document.querySelectorAll("[data-live-react-class]");Array.prototype.forEach.call(t,e=>{p(e)})},m={mounted(){let{el:t}=this,e=this.pushEvent.bind(this),i=this.pushEventTo&&this.pushEventTo.bind(this),n=this.handleEvent&&this.handleEvent.bind(this),{root:o,target:s,componentClass:a}=p(t,{pushEvent:e}),c=r(o,t,a,{pushEvent:e,pushEventTo:i,handleEvent:n});t.dataset.liveReactMerge&&(this.props=c),Object.assign(this,{target:s,componentClass:a,root:o})},updated(){let{root:t,el:e,target:i,componentClass:n}=this,o=this.pushEvent.bind(this),s=this.pushEventTo&&this.pushEventTo.bind(this),a=this.handleEvent,c=this.props,h=r(t,e,n,{pushEvent:o,pushEventTo:s},c);e.dataset.liveReactMerge&&(this.props=h)},destroyed(){let{root:t}=this;t.unmount()}};export{m as default,E as initLiveReact,p as initLiveReactElement};
